- name: Bootstrap Python and required libs on Ubuntu backend (u21.local)
  hosts: backend
  become: true
  gather_facts: false
  tasks:
    - name: Install Python3 and pip3 (if not present)
      raw: |
        apt-get update -y
        apt-get install -y python3 python3-pip
      changed_when: false

    - name: Install 'six' module for Python
      raw: |
        pip3 install six
      changed_when: false

    - name: Force gathering facts after bootstrapping
      setup:


# ðŸ‘‡ Add gather_facts: true here
- name: Common setup (SELinux + firewalld)
  hosts: all
  become: true
  gather_facts: true    # ðŸ‘ˆ This is important
  roles:
    - common

- name: Frontend setup
  hosts: frontend
  become: true
  gather_facts: true
  roles:
    - frontend

- name: Backend setup
  hosts: backend
  become: true
  gather_facts: true
  roles:
    - backend
