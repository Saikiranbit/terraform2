- name: Bootstrap Python on Ubuntu backend (u21.local)
  hosts: backend
  become: true
  gather_facts: false
  tasks:
    - name: Install Python3 and pip3 (if not present)
      raw: |
        apt-get update -y
        apt-get install -y python3 python3-pip
      changed_when: false

    - name: Ensure required Python libraries are present (safe install)
      raw: |
        pip3 install --upgrade --break-system-packages six
      changed_when: false

- name: Common setup (SELinux + firewalld)
  hosts: all
  become: true
  gather_facts: false
  roles:
    - common

- name: Frontend setup
  hosts: frontend
  become: true
  gather_facts: false
  roles:
    - frontend

- name: Backend setup
  hosts: backend
  become: true
  gather_facts: false
  roles:
    - backend
